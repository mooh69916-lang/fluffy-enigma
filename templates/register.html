{% extends 'base.html' %}
{% block title %}Create Account{% endblock %}
{% block content %}
<section class="container">
  <div class="form-card" style="max-width:520px;margin:28px auto">
    <h2 style="margin:0 0 8px 0">Create your account</h2>
    <p style="margin:0 0 16px 0;color:#6b7280">Secure registration. Passwords are stored hashed.</p>
    <form method="post" novalidate>
      <div class="form-field">
        <label class="label">Username</label>
        <input class="input" name="username" required autocomplete="username" placeholder="your-username">
      </div>
      <div class="form-field">
        <label class="label">Email</label>
        <input class="input" name="email" type="email" required autocomplete="email" placeholder="you@example.com">
      </div>
      <div class="form-field">
        <label class="label">Password</label>
        <input class="input" name="password" type="password" required autocomplete="new-password" placeholder="Choose a strong password">
        <div class="hint">Use at least 8 characters, include letters and numbers.</div>
      </div>
      <div class="form-field">
        <label class="label">Country</label>
        <select id="country-select" name="country" class="input" required>
          <option value="">Select your country</option>
          
          <option value="US">United States</option>
          <option value="PG">Papua New Guinea</option>
          <option value="GB">United Kingdom</option>
          <option value="CA">Canada</option>
          <option value="SB">ğŸ‡¸ğŸ‡§ Solomon Islands</option>
          <option value="VU">ğŸ‡»ğŸ‡º Vanuatu</option>
          <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
          <option value="WS">ğŸ‡¼ğŸ‡¸ Samoa</option>
          <option value="FJ">ğŸ‡«ğŸ‡¯ Fiji</option>
          <option value="TO">ğŸ‡¹ğŸ‡´ Tonga</option>

          <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
          <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
          <option value="NC">ğŸ‡³ğŸ‡¨ New Caledonia</option>
          <option value="PF">ğŸ‡µğŸ‡« French Polynesia</option>
          <option value="FM">ğŸ‡«ğŸ‡² Micronesia</option>
          <option value="MH">ğŸ‡²ğŸ‡­ Marshall Islands</option>
          <option value="PW">ğŸ‡µğŸ‡¼ Palau</option>
          <option value="KI">ğŸ‡°ğŸ‡® Kiribati</option>
          <option value="NR">ğŸ‡³ğŸ‡· Nauru</option>
          <option value="TV">ğŸ‡¹ğŸ‡» Tuvalu</option>
          <option value="CK">ğŸ‡¨ğŸ‡° Cook Islands</option>
          <option value="NU">ğŸ‡³ğŸ‡º Niue</option>
          <option value="TK">ğŸ‡¹ğŸ‡° Tokelau</option>
          <option value="AS">ğŸ‡¦ğŸ‡¸ American Samoa</option>
          <option value="GU">ğŸ‡¬ğŸ‡º Guam</option>
          <option value="MP">ğŸ‡²ğŸ‡µ Northern Mariana Islands</option>
          <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
          <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
          <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
          <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
          <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
          <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
          <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
          <option value="VN">ğŸ‡»ğŸ‡³ Vietnam</option>
          <option value="KR">ğŸ‡°ğŸ‡· South Korea</option>
        </select>
        <div class="hint">Selecting your country sets your default currency.</div>
      </div>
      <input type="hidden" name="currency_code" id="currency_code">
      <input type="hidden" name="currency_symbol" id="currency_symbol">
      <input type="hidden" name="currency_name" id="currency_name">
      <div style="margin-top:12px">
        <button class="btn" type="submit" style="width:100%">Create account</button>
      </div>
    </form>
    <p style="margin-top:12px;color:#6b7280;font-size:14px">Already have an account? <a href="/login">Sign in</a></p>
  </div>
</section>
<script>
// small script sets currency fields based on country selection
const countryCurrencyMap = {
  'NG': { code: 'NGN', symbol: 'â‚¦', name: 'Naira' , flag: 'ğŸ‡³ğŸ‡¬'},
  'US': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡ºğŸ‡¸'},
  'PG': { code: 'PGK', symbol: 'K', name: 'Kina', flag: 'ğŸ‡µğŸ‡¬'},
  'GB': { code: 'GBP', symbol: 'Â£', name: 'Pound Sterling', flag: 'ğŸ‡¬ğŸ‡§'},
  'CA': { code: 'CAD', symbol: '$', name: 'Canadian Dollar', flag: 'ğŸ‡¨ğŸ‡¦'},

  /* Pacific & Oceania */
  'SB': { code: 'SBD', symbol: 'SI$', name: 'Solomon Islands Dollar', flag: 'ğŸ‡¸ğŸ‡§'},
  'VU': { code: 'VUV', symbol: 'VT', name: 'Vatu', flag: 'ğŸ‡»ğŸ‡º'},
  'PH': { code: 'PHP', symbol: 'â‚±', name: 'Philippine Peso', flag: 'ğŸ‡µğŸ‡­'},
  'WS': { code: 'WST', symbol: 'WS$', name: 'Samoan Tala', flag: 'ğŸ‡¼ğŸ‡¸'},
  'FJ': { code: 'FJD', symbol: 'FJ$', name: 'Fiji Dollar', flag: 'ğŸ‡«ğŸ‡¯'},
  'TO': { code: 'TOP', symbol: 'T$', name: 'Tongan PaÊ»anga', flag: 'ğŸ‡¹ğŸ‡´'},

  'AU': { code: 'AUD', symbol: '$', name: 'Australian Dollar', flag: 'ğŸ‡¦ğŸ‡º'},
  'NZ': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar', flag: 'ğŸ‡³ğŸ‡¿'},
  'NC': { code: 'XPF', symbol: 'â‚£', name: 'CFP Franc', flag: 'ğŸ‡³ğŸ‡¨'},
  'PF': { code: 'XPF', symbol: 'â‚£', name: 'CFP Franc', flag: 'ğŸ‡µğŸ‡«'},
  'FM': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡«ğŸ‡²'},
  'MH': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡²ğŸ‡­'},
  'PW': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡µğŸ‡¼'},
  'KI': { code: 'AUD', symbol: '$', name: 'Australian Dollar', flag: 'ğŸ‡°ğŸ‡®'},
  'NR': { code: 'AUD', symbol: '$', name: 'Australian Dollar', flag: 'ğŸ‡³ğŸ‡·'},
  'TV': { code: 'AUD', symbol: '$', name: 'Australian Dollar', flag: 'ğŸ‡¹ğŸ‡»'},
  'CK': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar', flag: 'ğŸ‡¨ğŸ‡°'},
  'NU': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar', flag: 'ğŸ‡³ğŸ‡º'},
  'TK': { code: 'NZD', symbol: '$', name: 'New Zealand Dollar', flag: 'ğŸ‡¹ğŸ‡°'},
  'AS': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡¦ğŸ‡¸'},
  'GU': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡¬ğŸ‡º'},
  'MP': { code: 'USD', symbol: '$', name: 'US Dollar', flag: 'ğŸ‡²ğŸ‡µ'},

  /* Asia & East Asia */
  'JP': { code: 'JPY', symbol: 'Â¥', name: 'Japanese Yen', flag: 'ğŸ‡¯ğŸ‡µ'},
  'CN': { code: 'CNY', symbol: 'Â¥', name: 'Chinese Yuan', flag: 'ğŸ‡¨ğŸ‡³'},
  'HK': { code: 'HKD', symbol: '$', name: 'Hong Kong Dollar', flag: 'ğŸ‡­ğŸ‡°'},
  'SG': { code: 'SGD', symbol: '$', name: 'Singapore Dollar', flag: 'ğŸ‡¸ğŸ‡¬'},
  'MY': { code: 'MYR', symbol: 'RM', name: 'Malaysian Ringgit', flag: 'ğŸ‡²ğŸ‡¾'},
  'ID': { code: 'IDR', symbol: 'Rp', name: 'Indonesian Rupiah', flag: 'ğŸ‡®ğŸ‡©'},
  'TH': { code: 'THB', symbol: 'à¸¿', name: 'Thai Baht', flag: 'ğŸ‡¹ğŸ‡­'},
  'VN': { code: 'VND', symbol: 'â‚«', name: 'Vietnamese Dong', flag: 'ğŸ‡»ğŸ‡³'},
  'KR': { code: 'KRW', symbol: 'â‚©', name: 'South Korean Won', flag: 'ğŸ‡°ğŸ‡·'}
};
document.addEventListener('DOMContentLoaded', function(){
  const sel = document.getElementById('country-select');
  const code = document.getElementById('currency_code');
  const sym = document.getElementById('currency_symbol');
  const name = document.getElementById('currency_name');
  sel && sel.addEventListener('change', function(){
    const v = sel.value;
    if(countryCurrencyMap[v]){
      code.value = countryCurrencyMap[v].code;
      sym.value = countryCurrencyMap[v].symbol;
      name.value = countryCurrencyMap[v].name;
    } else {
      code.value = 'USD'; sym.value = '$'; name.value = 'US Dollar';
    }
  });
});
</script>
{% endblock %}
